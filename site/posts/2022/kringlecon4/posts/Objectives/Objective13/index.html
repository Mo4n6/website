
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../images/logo.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.3">
    
    
      
        <title>13) FPGA Programming - Kringlecon 4 - Calling Birds!</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.edf004c2.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#e92063">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="pink" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Kringlecon 4 - Calling Birds!" class="md-header__button md-logo" aria-label="Kringlecon 4 - Calling Birds!" data-md-component="logo">
      
  <img src="../../../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kringlecon 4 - Calling Birds!
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              13) FPGA Programming
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Kringlecon 4 - Calling Birds!" class="md-nav__button md-logo" aria-label="Kringlecon 4 - Calling Birds!" data-md-component="logo">
      
  <img src="../../../images/logo.png" alt="logo">

    </a>
    Kringlecon 4 - Calling Birds!
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://www.sharif.org" class="md-nav__link">
        Back to sharif.org
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Objectives
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Objectives" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Objectives
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Objective1/" class="md-nav__link">
        1) KringleCon Orientation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Objective2/" class="md-nav__link">
        2) Where in the World is Caramel Santaigo?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Objective3/" class="md-nav__link">
        3) Thaw Frost Tower's Entrance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Objective4/" class="md-nav__link">
        4) Slot Machine Investigation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Objective5/" class="md-nav__link">
        5) Strange USB Device
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Objective6/" class="md-nav__link">
        6) Shellcode Primer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Objective7/" class="md-nav__link">
        7) Printer Exploitation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Objective8/" class="md-nav__link">
        8) Kerberoasting on an Open Fire
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Objective9/" class="md-nav__link">
        9) Splunk!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Objective10/" class="md-nav__link">
        10) Now Hiring!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Objective11/" class="md-nav__link">
        11) Customer Complaint Analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Objective12/" class="md-nav__link">
        12) Frost Tower Website Checkup
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        13) FPGA Programming
      </a>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Terminals
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Terminals" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Terminals
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal1/" class="md-nav__link">
        Cranberry Pi Terminal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal2/" class="md-nav__link">
        Exif Metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal3/" class="md-nav__link">
        Grepping for Gold
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal4/" class="md-nav__link">
        Logic Muchers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal5/" class="md-nav__link">
        IPv6 Sandbox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal6/" class="md-nav__link">
        Holiday Hero
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal7/" class="md-nav__link">
        Shellcode Primer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal8/" class="md-nav__link">
        HoHo … No
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal9/" class="md-nav__link">
        Yara Analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal10/" class="md-nav__link">
        IMDS Exploration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal11/" class="md-nav__link">
        Strace Ltrace Retrace
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal12/" class="md-nav__link">
        Elf Code Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal13/" class="md-nav__link">
        Frostavator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal14/" class="md-nav__link">
        Bonus! Blue Log4Jack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Terminals/Terminal15/" class="md-nav__link">
        Bonus! Red Log4Jack
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../items/" class="md-nav__link">
        Items
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Hints
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Hints" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Hints
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../ohints/" class="md-nav__link">
        Objectives
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../thints/" class="md-nav__link">
        Terminals
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../map/" class="md-nav__link">
        Map
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../narrative/" class="md-nav__link">
        Narrative
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../music/" class="md-nav__link">
        Music
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../talks/" class="md-nav__link">
        Talks
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../booths/" class="md-nav__link">
        Booths
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../credits/" class="md-nav__link">
        Credits
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../answers/" class="md-nav__link">
        Answers
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

  <h1>13) FPGA Programming</h1>

<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Objective</label><label for="__tabbed_1_2">Walk-through</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><img alt="Obj" src="../../../images/obj/13/image1.png" /></p>
<div class="admonition info">
<p class="admonition-title">Details</p>
<ul>
<li><em>Location</em>: FrostFest/Frost Tower Rooftop</li>
<li><em>Troll</em>: Crunchy Squishter</li>
</ul>
</div>
<p><img alt="Obj" src="../../../images/obj/13/image2.png" /></p>
<div class="admonition quote">
<p class="admonition-title">Troll's Objective Message</p>
<p>Greetings Earthling! I'm Crunchy Squishter.</p>
<p>Hey, could you help me get this device on the table working? We've cobbled it together with primitive parts we've found on your home planet.
We need an FPGA though - and someone who knows how to program them.
If you haven't talked with Grody Goiterson by the Frostavator, you might get some FPGA tips there.
Thank you! Now we're able to communicate with the rest of our people!</p>
</div>
</div>
<div class="tabbed-block">
<p>The terminal challenge for this objective is the terminal "Frostavator" offered by Gordy Goiterson. Solving this terminal challenge provides additional hints for this objective. To view the hints use the menu on the left.</p>
<p>To start this objective click on the "FPGA programming" next to Crunchy Squishter.</p>
<p>From the <a href="https://www.youtube.com/watch?v=GFdG1PJ4QjA">conference video</a> for this objective, you know that you need to divide freq 100 to get the actual frequency:</p>
<p><img alt="Obj" src="../../../images/obj/13/image3.png" /></p>
<p>Also, to create the desired frequency square wave (freq), you would need to switch the output waveform twice per cycle. This means you need a timer that goes 2 x (freq) value. Taking into account the decimals and the input clock, you will need to switch output wave every 125MHZ/ (2 x * (freq/100)) count. In the code below this is called <code>increment</code>.</p>
<p>The other thing you need to take into account is the fact that it takes 0.5 clock cycle for the FPGA to reset. To build an accurate Square Wave generator you need to take this into account.</p>
<p>For this we actually count by 0.5 counts on every positive and negative clock edges. When the FPGA is reset, we set the counter to 0.5 to account for the reset.</p>
<p>Putting everything you get the following FPGA code to create square waves at requested frequency.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>    <span class="o">//</span> <span class="n">Note</span><span class="p">:</span> <span class="n">For</span> <span class="n">this</span> <span class="n">lab</span><span class="p">,</span> <span class="n">we</span> <span class="n">will</span> <span class="n">be</span> <span class="n">working</span> <span class="k">with</span> <span class="n">QRP</span> <span class="n">Corporation</span><span class="s1">&#39;s CQC-11 FPGA.</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>    <span class="o">//</span> <span class="n">The</span> <span class="n">CQC</span><span class="o">-</span><span class="mi">11</span> <span class="n">operates</span> <span class="k">with</span> <span class="n">a</span> <span class="mi">125</span><span class="n">MHz</span> <span class="n">clock</span><span class="o">.</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="o">//</span> <span class="n">Your</span> <span class="n">design</span> <span class="k">for</span> <span class="n">a</span> <span class="n">tone</span> <span class="n">generator</span> <span class="n">must</span> <span class="n">support</span> <span class="n">the</span> <span class="n">following</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>    <span class="o">//</span> <span class="n">inputs</span><span class="o">/</span><span class="n">outputs</span><span class="p">:</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>    <span class="o">//</span> <span class="p">(</span><span class="n">NOTE</span><span class="p">:</span> <span class="n">DO</span> <span class="n">NOT</span> <span class="n">CHANGE</span> <span class="n">THE</span> <span class="n">NAMES</span><span class="o">.</span> <span class="n">OUR</span> <span class="n">AUTOMATED</span> <span class="n">GRADING</span> <span class="n">TOOL</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>    <span class="o">//</span> <span class="n">REQUIRES</span> <span class="n">THE</span> <span class="n">USE</span> <span class="n">OF</span> <span class="n">THESE</span> <span class="n">NAMES</span><span class="err">!</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>    <span class="o">//</span> <span class="nb">input</span> <span class="n">clk</span> <span class="o">-</span> <span class="n">this</span> <span class="n">will</span> <span class="n">be</span> <span class="n">connected</span> <span class="n">to</span> <span class="n">the</span> <span class="mi">125</span><span class="n">MHz</span> <span class="n">system</span> <span class="n">clock</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="o">//</span> <span class="nb">input</span> <span class="n">rst</span> <span class="o">-</span> <span class="n">this</span> <span class="n">will</span> <span class="n">be</span> <span class="n">connected</span> <span class="n">to</span> <span class="n">the</span> <span class="n">system</span> <span class="n">board</span><span class="s1">&#39;s reset bus</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>    <span class="o">//</span> <span class="nb">input</span> <span class="n">freq</span> <span class="o">-</span> <span class="n">a</span> <span class="mi">32</span> <span class="n">bit</span> <span class="n">integer</span> <span class="n">indicating</span> <span class="n">the</span> <span class="n">required</span> <span class="n">frequency</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>    <span class="o">//</span>              <span class="p">(</span><span class="mi">0</span> <span class="o">-</span> <span class="mf">9999.99</span><span class="n">Hz</span><span class="p">)</span> <span class="n">formatted</span> <span class="k">as</span> <span class="n">follows</span><span class="p">:</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>    <span class="o">//</span>              <span class="mi">32</span><span class="s1">&#39;hf1206 or 32&#39;</span><span class="n">d987654</span> <span class="o">=</span> <span class="mf">9876.54</span><span class="n">Hz</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>    <span class="o">//</span> <span class="n">output</span> <span class="n">wave_out</span> <span class="o">-</span> <span class="n">a</span> <span class="n">square</span> <span class="n">wave</span> <span class="n">output</span> <span class="n">of</span> <span class="n">the</span> <span class="n">desired</span> <span class="n">frequency</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>    <span class="o">//</span> <span class="n">you</span> <span class="n">can</span> <span class="n">create</span> <span class="n">whatever</span> <span class="n">other</span> <span class="n">variables</span> <span class="n">you</span> <span class="n">need</span><span class="p">,</span> <span class="n">but</span> <span class="n">remember</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>    <span class="o">//</span> <span class="n">to</span> <span class="n">initialize</span> <span class="n">them</span> <span class="n">to</span> <span class="n">something</span><span class="err">!</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>    <span class="err">`</span><span class="n">timescale</span> <span class="mi">1</span><span class="n">ns</span><span class="o">/</span><span class="mi">1</span><span class="n">ns</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>     <span class="n">module</span> <span class="n">tone_generator</span> <span class="p">(</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>        <span class="nb">input</span> <span class="n">clk</span><span class="p">,</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>        <span class="nb">input</span> <span class="n">rst</span><span class="p">,</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>        <span class="nb">input</span> <span class="p">[</span><span class="mi">31</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">freq</span><span class="p">,</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>        <span class="n">output</span> <span class="n">wave_out</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>     <span class="p">);</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>        <span class="o">//</span> <span class="o">----</span> <span class="n">DO</span> <span class="n">NOT</span> <span class="n">CHANGE</span> <span class="n">THE</span> <span class="n">CODE</span> <span class="n">ABOVE</span> <span class="n">THIS</span> <span class="n">LINE</span> <span class="o">----</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>        <span class="o">//</span> <span class="o">----</span> <span class="n">IT</span> <span class="n">IS</span> <span class="n">NECESSARY</span> <span class="n">FOR</span> <span class="n">AUTOMATED</span> <span class="n">ANALYSIS</span> <span class="o">----</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>        <span class="o">//</span> <span class="n">TODO</span><span class="p">:</span> <span class="n">Add</span> <span class="n">your</span> <span class="n">code</span> <span class="n">below</span><span class="o">.</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>        <span class="o">//</span> <span class="n">Remove</span> <span class="n">the</span> <span class="n">following</span> <span class="n">line</span> <span class="ow">and</span> <span class="n">add</span> <span class="n">your</span> <span class="n">own</span> <span class="n">implementation</span><span class="o">.</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>        <span class="o">//</span> <span class="n">Note</span><span class="p">:</span> <span class="n">It</span><span class="s1">&#39;s silly, but it compiles...</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>        <span class="n">reg</span> <span class="n">wavey</span><span class="p">;</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>        <span class="n">assign</span> <span class="n">wave_out</span> <span class="o">=</span> <span class="n">wavey</span><span class="p">;</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>        <span class="n">real</span> <span class="n">counter</span><span class="p">;</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>        <span class="n">real</span> <span class="n">increment</span> <span class="o">=</span> <span class="mi">125000000</span> <span class="o">/</span> <span class="p">(</span><span class="n">freq</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">100</span><span class="p">);</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>        <span class="n">always</span> <span class="o">@</span><span class="p">(</span><span class="n">edge</span> <span class="n">clk</span> <span class="ow">or</span> <span class="n">negedge</span> <span class="n">rst</span><span class="p">)</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>        <span class="n">begin</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">rst</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>                <span class="n">begin</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>                    <span class="n">counter</span> <span class="o">&lt;=</span><span class="mf">0.5</span><span class="p">;</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>                    <span class="n">wavey</span> <span class="o">&lt;=</span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>                <span class="n">end</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>            <span class="k">else</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>                <span class="n">begin</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>                    <span class="k">if</span><span class="p">(</span><span class="n">counter</span> <span class="o">&gt;=</span> <span class="n">increment</span><span class="p">)</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>                        <span class="n">begin</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>                            <span class="n">counter</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>                            <span class="n">wavey</span> <span class="o">&lt;=</span> <span class="n">wavey</span> <span class="o">^</span> <span class="mi">1</span><span class="s1">&#39;b1;</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>                        <span class="n">end</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>                    <span class="k">else</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>                        <span class="n">counter</span> <span class="o">&lt;=</span> <span class="n">counter</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">;</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>                <span class="n">end</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>        <span class="n">end</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>    <span class="n">endmodule</span>
</code></pre></div>
<p>Copy and paste the above code and simulate 500Hz, 1KHz, 2KHz, and random frequency.</p>
<p><img alt="Obj" src="../../../images/obj/13/image4.png" /></p>
<p><img alt="Obj" src="../../../images/obj/13/image5.png" /></p>
<p>Once you complete this objective you will be given a FPGA item. You will need to plug the FPGA into the Speak &amp;c Spell next to Crunchy Squishter.</p>
<p><img alt="Obj" src="../../../images/obj/13/image6.png" /></p>
<p><img alt="Obj" src="../../../images/obj/13/image7.png" /></p>
<p>After this a spaceship appears which leads to the ending of the game.</p>
<p><img alt="Obj" src="../../../images/obj/13/image8.png" /></p>
<p><img alt="Obj" src="../../../images/obj/13/image9.png" /></p>
<div class="admonition quote">
<p class="admonition-title">Santa tells you</p>
<p>The Frostians have reached out to me via video link. They’ve explained to me all that has happened.
I’d like to thank you for your truly excellent work in foiling Jack’s plans and ensuring that he is finally brought to justice.
On behalf of all of us here at the North Pole, we wish you and yours a happy and healthy Holiday Season.
Thank you and HAPPY HOLIDAYS from me and all of the elves.
Ho Ho Ho!</p>
</div>
<div class="admonition success">
<p class="admonition-title">Answer</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>  // Note: For this lab, we will be working with QRP Corporation&#39;s CQC-11 FPGA.
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>  // The CQC-11 operates with a 125MHz clock.
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>  // Your design for a tone generator must support the following
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>  // inputs/outputs:
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>  // (NOTE: DO NOT CHANGE THE NAMES. OUR AUTOMATED GRADING TOOL
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>  // REQUIRES THE USE OF THESE NAMES!)
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>  // input clk - this will be connected to the 125MHz system clock
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>  // input rst - this will be connected to the system board&#39;s reset bus
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>  // input freq - a 32 bit integer indicating the required frequency
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>  //              (0 - 9999.99Hz) formatted as follows:
<a id="__codelineno-1-11" name="__codelineno-1-11"></a>  //              32&#39;hf1206 or 32&#39;d987654 = 9876.54Hz
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>  // output wave_out - a square wave output of the desired frequency
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>  // you can create whatever other variables you need, but remember
<a id="__codelineno-1-14" name="__codelineno-1-14"></a>  // to initialize them to something!
<a id="__codelineno-1-15" name="__codelineno-1-15"></a>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a>  `timescale 1ns/1ns
<a id="__codelineno-1-17" name="__codelineno-1-17"></a>  module tone_generator (
<a id="__codelineno-1-18" name="__codelineno-1-18"></a>      input clk,
<a id="__codelineno-1-19" name="__codelineno-1-19"></a>      input rst,
<a id="__codelineno-1-20" name="__codelineno-1-20"></a>      input [31:0] freq,
<a id="__codelineno-1-21" name="__codelineno-1-21"></a>      output wave_out
<a id="__codelineno-1-22" name="__codelineno-1-22"></a>  );
<a id="__codelineno-1-23" name="__codelineno-1-23"></a>      // ---- DO NOT CHANGE THE CODE ABOVE THIS LINE ----
<a id="__codelineno-1-24" name="__codelineno-1-24"></a>      // ---- IT IS NECESSARY FOR AUTOMATED ANALYSIS ----
<a id="__codelineno-1-25" name="__codelineno-1-25"></a>      // TODO: Add your code below.
<a id="__codelineno-1-26" name="__codelineno-1-26"></a>      // Remove the following line and add your own implementation.
<a id="__codelineno-1-27" name="__codelineno-1-27"></a>      // Note: It&#39;s silly, but it compiles...
<a id="__codelineno-1-28" name="__codelineno-1-28"></a>
<a id="__codelineno-1-29" name="__codelineno-1-29"></a>
<a id="__codelineno-1-30" name="__codelineno-1-30"></a>      reg wavey;
<a id="__codelineno-1-31" name="__codelineno-1-31"></a>      assign wave_out = wavey;
<a id="__codelineno-1-32" name="__codelineno-1-32"></a>      real counter;
<a id="__codelineno-1-33" name="__codelineno-1-33"></a>      real increment = 125000000 / (freq*2/100);
<a id="__codelineno-1-34" name="__codelineno-1-34"></a>
<a id="__codelineno-1-35" name="__codelineno-1-35"></a>      always @(edge clk or negedge rst)
<a id="__codelineno-1-36" name="__codelineno-1-36"></a>      begin
<a id="__codelineno-1-37" name="__codelineno-1-37"></a>          if (rst==1)
<a id="__codelineno-1-38" name="__codelineno-1-38"></a>              begin
<a id="__codelineno-1-39" name="__codelineno-1-39"></a>                  counter &lt;=0.5;
<a id="__codelineno-1-40" name="__codelineno-1-40"></a>                  wavey &lt;=0;
<a id="__codelineno-1-41" name="__codelineno-1-41"></a>              end
<a id="__codelineno-1-42" name="__codelineno-1-42"></a>          else
<a id="__codelineno-1-43" name="__codelineno-1-43"></a>              begin
<a id="__codelineno-1-44" name="__codelineno-1-44"></a>                  if(counter &gt;= increment)
<a id="__codelineno-1-45" name="__codelineno-1-45"></a>                      begin
<a id="__codelineno-1-46" name="__codelineno-1-46"></a>                          counter &lt;= 0;
<a id="__codelineno-1-47" name="__codelineno-1-47"></a>                          wavey &lt;= wavey ^ 1&#39;b1;
<a id="__codelineno-1-48" name="__codelineno-1-48"></a>
<a id="__codelineno-1-49" name="__codelineno-1-49"></a>                      end
<a id="__codelineno-1-50" name="__codelineno-1-50"></a>                  else
<a id="__codelineno-1-51" name="__codelineno-1-51"></a>                      counter &lt;= counter + 0.5;
<a id="__codelineno-1-52" name="__codelineno-1-52"></a>              end
<a id="__codelineno-1-53" name="__codelineno-1-53"></a>      end
<a id="__codelineno-1-54" name="__codelineno-1-54"></a>  endmodule
</code></pre></div>
</div>
</div>
</div>
</div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../Objective12/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 12) Frost Tower Website Checkup" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              12) Frost Tower Website Checkup
            </div>
          </div>
        </a>
      
      
        
        <a href="../../Terminals/Terminal1/" class="md-footer__link md-footer__link--next" aria-label="Next: Cranberry Pi Terminal" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Cranberry Pi Terminal
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "content.tabs.link"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.0bbba5b5.min.js"}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e1a181d9.min.js"></script>
      
    
  </body>
</html>